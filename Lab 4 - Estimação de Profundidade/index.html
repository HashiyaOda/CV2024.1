<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório de atividade prática<br>Visão Computacional<br>Experimento 4 - Estimação de profundidade<br><br>THIAGO HASHIYA ODA  11201810891<br>VITOR DOMENIQUELLI CHAGAS   11201810504<br> IVAN SALVATORE RUBINO  11025213</title>
    <style>
        body {
            align-items: center;
        }
        h1 {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <a href="../index.html">Página principal</a>
    <h1>Relatório de atividade prática<br>Visão Computacional<br>Experimento 4 - Estimação de profundidade<br><br>THIAGO HASHIYA ODA  11201810891<br>VITOR DOMENIQUELLI CHAGAS   11201810504<br> IVAN SALVATORE RUBINO  11025213</h1>
    <h1>OBJETIVOS</h1>
    <p>Entender os conceitos de Mapa de Disparidade, Retificação de Imagens, e Mapa de Produndidade. Realizar um experimento de medida da distancia de objetos através do mapa de disparidade de uma câmera estéreo. Elaborar o relatório em equipe de alunos.</p>
    <br><br><br>
    
    <h1>Parte 1</h1>
        <br>
        <p>Estudo da teoria sobre estereoscopia e parâmetros conjuntos de duas  câmeras, e também sobre processo de mapeamento de disparidade entre duas cameras.</p>
    <br><br><br>
    
    <h1>Parte 2</h1>
    <br>
    <p></p>Utilizar a câmera estereoscopica construída na aula anterior. <br>
i. Realizar a calibração estereo seguindo as instruçoes indicadas na seção “Step 2: Performing stereo calibration with fixed intrinsic parameters” da referencia [1], repetindo conforme realizado na aula anterior (captura de imagens do padrão e calculo dos parametros de calibração. Os parametros serão salvos no arquivo “params_py.xml”, que deverão ser usados no próximo procedimento.
<br>ii. Executar o algoritmo Block Matching do OpenCV, sintonizando seus parâmetros seguindo as orientações indicadas na seção “Block Matching For Dense Stereo Correspondence” da referencia [3].  Neste caso é utilizado o programa “disparity_params_gui.py”. Este programa deverá ser adaptado para leitura do arquivo “params_py.xml”, com os parâmetros de calibração da sua camera estéreo.  Ao final do processo, o mapa de disparidade será salvo no arquivo “depth_estmation_params_py.xml”. Este arquivo será utilizado no próximo procedimento.
<br>iii. Obter o mapa de profundidade pelo processo prático de medidad de distância seguindo as orientações indicadas na seção “From disparity map to depth map” da referencia [3]. Neste caso é utilizado o programa “disparity2depth_calib.py”. Este programa deverá ser adaptado para leitura do arquivo “params_py.xml”, com os parâmetros de calibração da sua camera estéreo. Neste caso, será utilizado o mapa de disparidade do arquivo “depth_estmation_params_py.xml”. Este mesmo arquivo xml será atualizado com novos valores, pois será utilizado no próximo procedimento.
<br>iv. Realizar medidas de distância seguindo as orientações indicadas na seção “Obstacle avoidance system” da referencia [3]. Neste caso é utilizado o programa “obstacle_avoidance.py”. Este programa deverá ser adaptado para leitura do arquivo “params_py.xml”, e do arquivo “depth_estmation_params_py.xml”. Utilize pelo menos três objetos distintos.
<br>v. As medidas de distância realizadas deverão ser colocadas numa tabela, e comparadas com a distância real. Calcule o erro, e faça uma análise dos resultados das medições bem como da influencia dos parametros.
<br>vi. No relatório descreva os procedimentos com o máximo de detalhes, de forma a permitir a reprodução do experimento. Grave imagens e videos dos procedimentos.
</p>
    <br><br><br>

    
    <h1>Parte 3<br></h1>
    <p>Inicialmente foi realizado a calibraçao das cameras usando o arquivo que tira as fotos de ambas as cameras com um intervalo de 5 segundos por foto. Em seguida, é utilizado o programa de calibração em que calcula e retorna a tabela com os parametros de calibração desta camera. Com o arquivo da calibração, alimentamos no arquivo de “disparity2depth_calib.py". Porem o grupo observou que neste código, é aberto uma janela com o feed do video com uma camada de processamento em relação a imagem das duas cameras. Abaixo segue como a janela deveria abrir, onde estaria os ajustes dos parametros e em uma caixa o feed de video.</p>
<img src="Display.png" alt="Foto">
    <p> No entanto, reparamos que o feed estava incorreto então optamos por realizar a calibração novamente. Depois de algumas novas calibrações, foi possivel obter uma imagem pelo feed de video porem ele estava com um zoom e apenas pegando uma pequena seção do video. Acreditamos que no processo de calibração, o posicionamento das cameras sofreram alguma alteração e/ou o codigo interpreta que apenas aquela seção em particular em que há uma intersecção das imagens das cameras. Abaixo segue uma imagem onde representa como que o nosso sistema estava se comportando, onde o feed de video apresentado seria apenas o que está marcado com o quadrado vermelho.</p>
<img src="Display2.png" alt="Foto">
    <p>Mexendo nos parametros, era possivel de obter uma imagem mais limpa do feed, porem como estava com um zoom, nao foi possivel realizar os demais passos do experimento, onde seria uma estimativa da distancia de um certo objeto a partir desse calculo de paralaxe entre as cameras:</p>

    <br><br><br>


    <h1>Análise e Conclusão</h1>
    <p>Esse primeiro laboratório serviu para inicializarmos com o processo de aprendizado com Python e algumas funções. A maioria das funções já estavam escritas porem estavam com algum erro e/ou com parametros errados. Com algumas alterações desses codigos os programas rodaram conforme solicitado.</p>
    <p>O grupo conseguiu observar algumas funções que serão utilizadas no futuro para Visão Computacional, tais como captura de tela, captura de vídeo e processamento dessas imagens e videos. Com essas ferramentas, podemos aplicar diversas ferramentas de processamento de dados, machine learning para diferentes aplicações.</p>
    <br><br><br>
    <a href="../index.html">Página principal</a>
</body>
</html>
